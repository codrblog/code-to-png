<script src="https://pagecdn.io/lib/ace/1.4.7/ace.js" crossorigin="anonymous" integrity="sha256-C7DTYRJLG+B/VEzHGeoPMw699nsTQYPAXHKXZb+q04E=" ></script>
<script src="https://pagecdn.io/lib/html2canvas/0.4.1/html2canvas.min.js" crossorigin="anonymous"  ></script>

<script>
  var editor;

  async function render() {
    const canvas = await html2canvas(document.getElementById('code'));
    const blob = await new Promise((resolve) => canvas.toBlob(resolve));

    document.getElementById('image').src = canvas.toDataURL('image/png');
  }

  function startEditor() {
    editor = ace.edit('editor', {
      theme: 'ace/theme/monokai',
      mode: 'ace/mode/typescript',
      maxLines: 500,
      minLines: 2,
      fontSize: 13,
      wrap: true,
      useWorker: false,
      autoScrollEditorIntoView: true
    });

    editor.setHighlightActiveLine(false);
    editor.setHighlightSelectedWord(false);
    editor.setHighlightGutterLine(false);
    editor.setShowPrintMargin(false);
    editor.setOption('displayIndentGuides', false);

    // var textarea = $('#editor_content');
    // editor.getSession().on('change', function () {
    //   textarea.val(editor.getSession().getValue());
    // });
    // textarea.val(editor.getSession().getValue());
  }

  document.addEventListener('DOMContentLoaded', startEditor);
</script>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  #editor {
    position: absolute;
    width: 700px;
    height: 400px;
    left: calc(50% - 700px);
  }

  .center {
    text-align: center;
  }
</style>
<div class="center">
  <button onclick="render()">update</button>
</div>
<div id="code">
  <div id="editor"></div>
</div>
<img id="image"></img>